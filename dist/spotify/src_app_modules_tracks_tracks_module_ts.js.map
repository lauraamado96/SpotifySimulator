{"version":3,"file":"src_app_modules_tracks_tracks_module_ts.js","mappings":"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","sources":["./src/app/modules/tracks/pages/tracks-page/tracks-page.component.ts","./src/app/modules/tracks/pages/tracks-page/tracks-page.component.html","./src/app/modules/tracks/services/track.service.ts","./src/app/modules/tracks/tracks-routing.module.ts","./src/app/modules/tracks/tracks.module.ts","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { TrackModel } from '@core/models/tracks.model';\nimport { TrackService } from '@modules/tracks/services/track.service';\nimport { Subscription, lastValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-tracks-page',\n  templateUrl: './tracks-page.component.html',\n  styleUrls: ['./tracks-page.component.css']\n})\nexport class TracksPageComponent implements OnInit, OnDestroy {\n\n  tracksTrending: Array<TrackModel> = []\n  tracksRandom: Array<TrackModel> = []\n  listObservers$: Array<Subscription> = []\n\n  constructor(private trackService: TrackService) { }\n\n  ngOnInit(): void {\n    this.loadDataAll()\n    this.loadDataRandom()\n  }\n\n  async loadDataAll(): Promise<any> {\n    const tracksTrending$ = this.trackService.getAllTracks$();\n    this.tracksTrending = await lastValueFrom(tracksTrending$);\n  }\n\n  loadDataRandom(): void {\n    this.trackService.getAllRandom$()\n      .subscribe((response: TrackModel[]) => {\n        this.tracksRandom = response\n      })\n  }\n\n  ngOnDestroy(): void {\n\n  }\n\n}\n","<div class=\"tracks-page\">\n    <!-- section top (small) -->\n    <app-section-generic [dataTracks]=\"tracksTrending\" [mode]=\"'small'\" [title]=\"'¡La mejor música del mundo'\"></app-section-generic>\n    <!-- section bottom (big) -->\n    <app-section-generic [dataTracks]=\"tracksRandom\" [mode]=\"'big'\" [title]=\"'Lo mejor de Electrónica'\"></app-section-generic>\n</div>","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { TrackModel } from '@core/models/tracks.model';\nimport { catchError, map, mergeMap, Observable, of } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TrackService {\n\n  private readonly URL = environment.api\n\n  constructor(private httpClient: HttpClient) {\n\n  }\n\n  private skipById(listTracks: TrackModel[], id: number): Promise<TrackModel[]> {\n    return new Promise((resolve, reject) => {\n      const listTmp = listTracks.filter(a => a._id !== id)\n      resolve(listTmp)\n    })\n  }\n\n  getAllTracks$(): Observable<any> {\n    return this.httpClient.get(`${this.URL}/tracks`)\n      .pipe(\n        map(({ data }: any) => {\n          return data\n        })\n      )\n  }\n\n  getAllRandom$(): Observable<any> {\n    return this.httpClient.get(`${this.URL}/tracks`)\n      .pipe(\n        mergeMap(({ data }: any) => this.skipById(data, 2)),\n        catchError((err) => {\n          const { status, statusText } = err;\n          return of([])\n        })\n      )\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { TracksPageComponent } from './pages/tracks-page/tracks-page.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TracksPageComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class TracksRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TracksRoutingModule } from './tracks-routing.module';\nimport { SharedModule } from '@shared/shared.module';\n\nimport { TracksPageComponent } from './pages/tracks-page/tracks-page.component';\n\n@NgModule({\n  declarations: [\n    TracksPageComponent\n  ],\n  imports: [\n    CommonModule,\n    TracksRoutingModule,\n    SharedModule\n  ]\n})\nexport class TracksModule { }\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}"],"names":["lastValueFrom","TracksPageComponent","constructor","trackService","ngOnInit","loadDataAll","loadDataRandom","tracksTrending$","getAllTracks$","tracksTrending","getAllRandom$","subscribe","response","tracksRandom","ngOnDestroy","selectors","decls","vars","consts","template","i0","catchError","map","mergeMap","of","environment","TrackService","httpClient","api","skipById","listTracks","id","Promise","resolve","reject","listTmp","filter","a","_id","get","URL","pipe","data","err","status","statusText","factory","providedIn","RouterModule","routes","path","component","TracksRoutingModule","forChild","imports","exports","CommonModule","SharedModule","TracksModule","declarations","EmptyError","source","config","hasConfig","_hasValue","_value","next","value","error","complete","defaultValue"],"sourceRoot":"webpack:///","x_google_ignoreList":[5,6]}